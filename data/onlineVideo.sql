create DATABASE IF NOT EXISTS onlineVideo;
use onlineVideo;
set sql_safe_updates=0;



CREATE TABLE IF NOT EXISTS user(
  id VARCHAR(32) NOT NULL UNIQUE COMMENT 'ID',
  loginname VARCHAR (120) NOT NULL COMMENT '用户名',
  password VARCHAR (100) NOT NULL COMMENT '密码',
  email VARCHAR (32) NOT NULL COMMENT '邮箱',
  PRIMARY KEY (id),
  UNIQUE KEY INDEX_USER_LOGINNAME(loginname)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
DELETE FROM user;
INSERT INTO user VALUES ('e140c7a322494a23bc1b85739b01113d','admin','admin','admin@admin.com');




CREATE TABLE IF NOT EXISTS role (
  id VARCHAR(32) NOT NULL UNIQUE COMMENT 'ID',
  content VARCHAR(150) NOT NULL COMMENT '角色信息',
  PRIMARY KEY (id),
  UNIQUE KEY (content)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
DELETE FROM role;
INSERT INTO role VALUES('e140c7a322494a23bc1b85739b01113d','normal');




CREATE TABLE IF NOT EXISTS user_role(
  user$id VARCHAR(32) NOT NULL  COMMENT '用户表的id',
  role$id VARCHAR(32) NOT NULL  COMMENT '角色表的id',
  state bool NOT NULL DEFAULT TRUE,
  PRIMARY KEY(user$id, role$id),
  CONSTRAINT USER_ROLE_FK_user FOREIGN KEY(user$id) REFERENCES user(id),
  CONSTRAINT USER_ROLE_FK_role FOREIGN KEY(role$id) REFERENCES role(id)
)ENGINE=InnoDB DEFAULT CHARSET=utf8;
DELETE FROM user_role;
INSERT INTO user_role VALUES('e140c7a322494a23bc1b85739b01113d','e140c7a322494a23bc1b85739b01113d',true);




CREATE TABLE IF NOT EXISTS function(
	id VARCHAR(32) NOT NULL COMMENT 'ID',
	content VARCHAR(500) NOT NULL COMMENT '权利信息'
)ENGINE=InnoDB DEFAULT CHARSET=utf8;